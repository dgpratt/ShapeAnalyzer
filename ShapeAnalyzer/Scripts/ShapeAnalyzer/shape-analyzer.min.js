(function(){var t,i,r,s,u,f,e,n,o;this.analyzeShape=function(n,i,r){var u;return u=new Image,u.onload=function(){var i,e,o,s;return o=f(u),n==="circle"&&(s=(new Date).getTime(),i=t(o),e=(new Date).getTime()-s,r)?r(i,e):void 0},u.src=i},f=function(n){var t,r;return t=i(n.width,n.height)[0],r=t.getContext("2d"),r.drawImage(n,0,0),r.getImageData(0,0,t.width,t.height)},i=function(n,t){var i;return i="c"+o(1,1e6),$("<canvas id="+i+" width="+n+" height="+t+"><\/canvas>")},t=function(n){var f,i,o,t,s;return t=u(n),s=e(n,t.row,t.col),i=Math.ceil(t.col+(s-t.col)/2),f=r(n,i,t.row),o=Math.ceil(t.row+(f-t.row)/2),{centerX:i,centerY:o}},u=function(t){for(var e,i,r,f,o=i=0,u=t.height-1;0<=u?i<=u:i>=u;o=0<=u?++i:--i)for(e=r=0,f=t.width-1;0<=f?r<=f:r>=f;e=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},s=function(t){for(var o,i,r,f,e=i=0,u=t.width-1;0<=u?i<=u:i>=u;e=0<=u?++i:--i)for(o=r=0,f=t.height-1;0<=f?r<=f:r>=f;o=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},e=function(t,i,r){for(var u,e=u=r,f=t.width-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,e,i))return e-1;return t.width-1},r=function(t,i,r){for(var u,e=u=r,f=t.height-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,i,e))return e-1;return t.height-1},n=function(n,t,i){var u,f,e,r,o;return r=(i*n.width+t)*4,o=n.data[r],e=n.data[r+1],f=n.data[r+2],u=n.data[r+3],o+e+f===0&&u===255},o=function(n,t){return Math.floor(Math.random()*t+n)}}).call(this)