(function(){var t,i,r,u,f,e,o,n,s;this.analyzeShape=function(n,i,u){var f;return f=new Image,f.onload=function(){var n,i,e;return n=r(f.width,f.height)[0],e=n.getContext("2d"),e.drawImage(f,0,0),i=t(n),u?u(i):void 0},f.src=i},r=function(n,t){var i;return i="c"+s(1,1e6),$("<canvas id="+i+" width="+n+" height="+t+"><\/canvas>")},t=function(n){var t,r;return t=n.getContext("2d"),r=t.getImageData(0,0,n.width,n.height),i(r)},i=function(n){var r,s,h,t,i,c,l,a;return i=e(n),c=o(n,i.row,i.col),r=i.col+(c-i.col)/2,t=f(n),h=u(n,t.col,t.row),s=t.row+(h-t.row)/2,a=s-i.row,l=r-t.col,{centerX:r,centerY:s,radiusX:l,radiusY:a}},e=function(t){for(var e,i,r,f,o=i=0,u=t.height-1;0<=u?i<=u:i>=u;o=0<=u?++i:--i)for(e=r=0,f=t.width-1;0<=f?r<=f:r>=f;e=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},f=function(t){for(var o,i,r,f,e=i=0,u=t.width-1;0<=u?i<=u:i>=u;e=0<=u?++i:--i)for(o=r=0,f=t.height-1;0<=f?r<=f:r>=f;o=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},o=function(t,i,r){for(var u,e=u=r,f=t.width-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,e,i))return e},u=function(t,i,r){for(var u,e=u=r,f=t.height-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,i,e))return e},n=function(n,t,i){var u,f,r,e;return r=(i*n.width+t)*4,e=n.data[r],f=n.data[r+1],u=n.data[r+2],e+f+u===0},s=function(n,t){return Math.floor(Math.random()*t+n)}}).call(this)