(function(){var t,i,r,u,f,e,o,n,s;this.analyzeShape=function(n,i,r){var u;return u=new Image,u.onload=function(){var i,f,o,s;return o=e(u),n==="circle"&&(s=(new Date).getTime(),i=t(o),f=(new Date).getTime()-s,r)?r(i,f):void 0},u.src=i},e=function(n){var t,r;return t=i(n.width,n.height)[0],r=t.getContext("2d"),r.drawImage(n,0,0),r.getImageData(0,0,t.width,t.height)},i=function(n,t){var i;return i="c"+s(1,1e6),$("<canvas id="+i+" width="+n+" height="+t+"><\/canvas>")},t=function(n){var e,s,h,t,i,c;return i=f(n),c=o(n,i.row,i.col),e=i.col+(c-i.col)/2,t=u(n),h=r(n,t.col,t.row),s=t.row+(h-t.row)/2,{centerX:e,centerY:s}},f=function(t){for(var e,i,r,f,o=i=0,u=t.height-1;0<=u?i<=u:i>=u;o=0<=u?++i:--i)for(e=r=0,f=t.width-1;0<=f?r<=f:r>=f;e=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},u=function(t){for(var o,i,r,f,e=i=0,u=t.width-1;0<=u?i<=u:i>=u;e=0<=u?++i:--i)for(o=r=0,f=t.height-1;0<=f?r<=f:r>=f;o=0<=f?++r:--r)if(n(t,e,o))return{row:o,col:e}},o=function(t,i,r){for(var u,e=u=r,f=t.width-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,e,i))return e-1},r=function(t,i,r){for(var u,e=u=r,f=t.height-1;r<=f?u<=f:u>=f;e=r<=f?++u:--u)if(!n(t,i,e))return e-1},n=function(n,t,i){var u,f,e,r,o;return r=(i*n.width+t)*4,o=n.data[r],e=n.data[r+1],f=n.data[r+2],u=n.data[r+3],o+e+f===0&&u===255},s=function(n,t){return Math.floor(Math.random()*t+n)}}).call(this)